<div class="modal fade" id="editPurchaseModal{{ purchase_order.id }}" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content border-0 shadow-lg">

      <form method="POST">
        {% csrf_token %}
        <input type="hidden" name="edit_purchase_order" value="{{ purchase_order.id }}">

        <!-- Header -->
        <div class="modal-header   py-2">
          <h5 class="modal-title">Update Purchase Order</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>

        <!-- Body -->
        <div class="modal-body p-4" style="max-height: 70vh; overflow-y:auto;">

          <!-- Basic Details -->
          <h6 class="fw-bold border-bottom pb-2 mb-3 ">Basic Details</h6>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label fw-semibold">Delivery Date</label>
              <input type="date" name="delivery_date" class="form-control"
                value="{{ purchase_order.delivery_date|date:'Y-m-d' }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Party Name</label>
              <input type="text" class="form-control" readonly
                value="{{ purchase_order.party_details.party_name }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Job Name</label>
              <input type="text" name="job_name" class="form-control"
                value="{{ purchase_order.job_name }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Pouch Type</label>
              <input type="text" name="pouch_type" class="form-control"
                value="{{ purchase_order.pouch_type }}">
            </div>
          </div>

          <!-- Pouch Details -->
          <h6 class="fw-bold border-bottom pb-2 mt-4 mb-3 ">Pouch Details</h6>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label fw-semibold">Open Size</label>
              <input type="text" name="pouch_open_size" class="form-control"
                value="{{ purchase_order.pouch_open_size }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Combination</label>
              <input type="text" name="pouch_combination" class="form-control"
                value="{{ purchase_order.pouch_combination }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Minimum Quantity</label>
              <input type="number" name="minimum_quantity" class="form-control"
                value="{{ purchase_order.minimum_quantity }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Quantity Variate</label>
              <input type="text" name="quantity_variate" class="form-control"
                value="{{ purchase_order.quantity_variate }}">
            </div>
          </div>

          <!-- Quantity & Rate -->
          <h6 class="fw-bold border-bottom pb-2 mt-4 mb-3 ">Quantity & Rate</h6>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label fw-semibold">Quantity</label>
              <input type="number" name="quantity" class="form-control"
                value="{{ purchase_order.quantity }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Rate / Kg</label>
              <input type="number" step="0.01" name="purchase_rate_per_kg" class="form-control"
                value="{{ purchase_order.purchase_rate_per_kg }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">No. of Pouch / Kg</label>
              <input type="number" name="no_of_pouch_kg" class="form-control"
                value="{{ purchase_order.no_of_pouch_kg }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Per Pouch Rate</label>
              <input type="number" step="0.01" name="per_pouch_rate_basic" class="form-control"
                value="{{ purchase_order.per_pouch_rate_basic }}">
            </div>
          </div>

          <!-- Charges -->
          <h6 class="fw-bold border-bottom pb-2 mt-4 mb-3 ">Charges</h6>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label fw-semibold">Zipper Cost</label>
              <input type="number" step="0.01" name="zipper_cost" class="form-control"
                value="{{ purchase_order.zipper_cost }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Pouch Charge</label>
              <input type="number" step="0.01" name="pouch_charge" class="form-control"
                value="{{ purchase_order.pouch_charge }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Freight</label>
              <input type="number" step="0.01" name="freight" class="form-control"
                value="{{ purchase_order.freight }}">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">GST (%)</label>
              <input type="number" name="gst" class="form-control"
                value="{{ purchase_order.gst }}">
            </div>
          </div>

          <!-- Final Rate -->
          <div class="row g-3 mt-3">
            <div class="col-md-4">
              <label class="form-label fw-bold success">Final Rate</label>
              <input type="number" step="0.01" name="final_rare" class="form-control fw-bold"
                value="{{ purchase_order.final_rare }}">
            </div>
          </div>

          <!-- Notes -->
          <h6 class="fw-bold border-bottom pb-2 mt-4 mb-3 ">Additional Info</h6>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label fw-semibold">Delivery Address</label>
              <textarea name="delivery_address" class="form-control" rows="2">{{ purchase_order.delivery_address }}</textarea>
            </div>

            <div class="col-md-6">
              <label class="form-label fw-semibold">Special Instruction</label>
              <textarea name="special_instruction" class="form-control" rows="2">{{ purchase_order.special_instruction }}</textarea>
            </div>

            <div class="col-md-12">
              <label class="form-label fw-semibold">Note</label>
              <textarea name="note" class="form-control" rows="2">{{ purchase_order.note }}</textarea>
            </div>
          </div>

        </div>

        <!-- Footer -->
        <div class="modal-footer bg-light py-2">
          <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">
            Cancel
          </button>
          <button type="reset" class="btn btn-sm btn-outline-dark">Reset</button>
          <button type="submit" class="btn btn-sm btn-primary px-4">Update</button>
        </div>

      </form>
    </div>
  </div>
</div>
